/*
 * Automatically generated by Hostboot's ./genErrlParsers.pl
 * Do not modify this file in the FSP tree, it is provided by
 * Hostboot and will be overwritten
 *
 * TimeStamp:   Tue May 15 13:26:15 2018
 * Image Id:    hb0515b_1820.920
 *
 */

#include <errlplugins.H>
#include <errlusrparser.H>
#include <srcisrc.H>

static bool SrcDataParse(ErrlUsrParser & i_parser,
                         const SrciSrc & i_src)
{
    uint32_t l_error = (i_src.reasonCode() << 8) + i_src.moduleId();
    bool l_success = true;

    switch(l_error)
    {
    case 0x340301:
        i_parser.PrintString("devdesc", "Exception occurred during execution of HBBL");
        i_parser.PrintString("moduleid", "Bootloader::MOD_BOOTLOADER_TERMINATE");
        i_parser.PrintString("reasoncode", "Bootloader::RC_STD_EXCEPTION");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Exception vector address");
        i_parser.PrintString("userdata2", "NIP / SRR0");
        break;

    case 0x340401:
        i_parser.PrintString("devdesc", "Exception occurred during execution of HBBL");
        i_parser.PrintString("moduleid", "Bootloader::MOD_BOOTLOADER_TERMINATE");
        i_parser.PrintString("reasoncode", "Bootloader::RC_STD_EX_W_DSISR");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Exception vector address");
        i_parser.PrintString("userdata2", "NIP / SRR0");
        break;

    case 0x340501:
        i_parser.PrintString("devdesc", "Exception occurred during execution of HBBL");
        i_parser.PrintString("moduleid", "Bootloader::MOD_BOOTLOADER_TERMINATE");
        i_parser.PrintString("reasoncode", "Bootloader::RC_STD_EX_W_SRR1");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Exception vector address");
        i_parser.PrintString("userdata2", "NIP / SRR0");
        break;

    case 0x340601:
        i_parser.PrintString("devdesc", "Exception occurred during execution of HBBL");
        i_parser.PrintString("moduleid", "Bootloader::MOD_BOOTLOADER_TERMINATE");
        i_parser.PrintString("reasoncode", "Bootloader::RC_HYPE_EXCEPTION");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Exception vector address");
        i_parser.PrintString("userdata2", "NIP / HSRR0");
        break;

    case 0x340803:
        i_parser.PrintString("devdesc", "Invalid TOC buffer pointer");
        i_parser.PrintString("moduleid", "Bootloader::MOD_PNORACC_READTOC");
        i_parser.PrintString("reasoncode", "Bootloader::RC_CHK_NULL_BUFFER");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Pointer to TOC buffer");
        i_parser.PrintString("userdata2[32:63]", "Error code");
        break;

    case 0x340903:
        i_parser.PrintString("devdesc", "FFS header checksum error");
        i_parser.PrintString("moduleid", "Bootloader::MOD_PNORACC_READTOC");
        i_parser.PrintString("reasoncode", "Bootloader::RC_HDR_CHECKSUM_ERR");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Pointer to FFS header");
        i_parser.PrintString("userdata2[32:63]", "Error code");
        break;

    case 0x340A03:
        i_parser.PrintString("devdesc", "Check FFS header error(s)");
        i_parser.PrintString("moduleid", "Bootloader::MOD_PNORACC_READTOC");
        i_parser.PrintString("reasoncode", "Bootloader::RC_CHECK_HEADER_ERR");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Pointer to FFS header");
        i_parser.PrintString("userdata2[32:63]", "Error code");
        break;

    case 0x340B03:
        i_parser.PrintString("devdesc", "Parse FFS entries error");
        i_parser.PrintString("moduleid", "Bootloader::MOD_PNORACC_READTOC");
        i_parser.PrintString("reasoncode", "Bootloader::RC_PARSE_ENTRIES_ERR");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Pointer to FFS entry with error");
        i_parser.PrintString("userdata2[32:63]", "Error code");
        break;

    case 0x340C04:
        i_parser.PrintString("devdesc", "Invalid flash address for HBB");
        i_parser.PrintString("moduleid", "Bootloader::MOD_PNORACC_GETHBBSECT");
        i_parser.PrintString("reasoncode", "Bootloader::RC_NO_HBB_IN_TOC");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Pointer to HBB Section data");
        i_parser.PrintString("userdata2[32:63]", "HBB Section flash address");
        break;

    case 0x340702:
        i_parser.PrintString("devdesc", "Uncorrectable ECC error found in HBB");
        i_parser.PrintString("moduleid", "Bootloader::MOD_BOOTLOADER_MAIN");
        i_parser.PrintString("reasoncode", "Bootloader::RC_REMOVE_ECC_FAIL");
        i_parser.PrintString("userdata1[0:15]", "TI_WITH_SRC");
        i_parser.PrintString("userdata1[16:31]", "TI_BOOTLOADER");
        i_parser.PrintString("userdata1[32:63]", "Failing address = 0");
        i_parser.PrintString("userdata2[0:31]", "Word7 = 0");
        i_parser.PrintString("userdata2[32:63]", "Word8 = 0");
        break;

    default:
        l_success = false;
        break;
    };
    return l_success;
}

static errl::SrcPlugin g_SrcPlugin(0x3400, SrcDataParse, ERRL_CID_HOSTBOOT);
