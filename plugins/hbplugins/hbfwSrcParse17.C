/*
 * Automatically generated by Hostboot's ./genErrlParsers.pl
 * Do not modify this file in the FSP tree, it is provided by
 * Hostboot and will be overwritten
 *
 * TimeStamp:   Tue May 15 13:26:15 2018
 * Image Id:    hb0515b_1820.920
 *
 */

#include <errlplugins.H>
#include <errlusrparser.H>
#include <srcisrc.H>

static bool SrcDataParse(ErrlUsrParser & i_parser,
                         const SrciSrc & i_src)
{
    uint32_t l_error = (i_src.reasonCode() << 8) + i_src.moduleId();
    bool l_success = true;

    switch(l_error)
    {
    case 0x171C14:
        i_parser.PrintString("devdesc", "Timeout waiting for OCC checkpoint");
        i_parser.PrintString("moduleid", "ISTEP::MOD_PM_VERIFY_OCC_CHKPT");
        i_parser.PrintString("reasoncode", "ISTEP::RC_PM_OCC_CHKPT_TIMEOUT");
        i_parser.PrintString("userdata1", "HUID");
        i_parser.PrintString("userdata2", "Checkpoint value");
        break;

    case 0x170C0D:
        i_parser.PrintString("devdesc", "Unexpected bus target type");
        i_parser.PrintString("moduleid", "MOD_EDI_EI_IO_RUN_TRAINING");
        i_parser.PrintString("reasoncode", "RC_INVALID_TARGET_TYPE");
        i_parser.PrintString("userdata1", "bus type");
        break;

    case 0x17110D:
        i_parser.PrintString("devdesc", "Mixed bus connection of two types");
        i_parser.PrintString("moduleid", "MOD_EDI_EI_IO_RUN_TRAINING");
        i_parser.PrintString("reasoncode", "RC_MIXED_PBUS_CONNECTION");
        i_parser.PrintString("userdata1", "Endpoint1 bus type");
        i_parser.PrintString("userdata2", "Endpoint2 bus type");
        break;

    case 0x17120D:
        i_parser.PrintString("devdesc", "Both endpoint connections of same chip");
        i_parser.PrintString("moduleid", "MOD_EDI_EI_IO_RUN_TRAINING");
        i_parser.PrintString("reasoncode", "RC_SAME_CHIP_PBUS_CONNECTION");
        break;

    case 0x17130D:
        i_parser.PrintString("devdesc", "Connection is conflicting. endp1 -> endp2 but endp2 -> endp3. endp1 -> endp2 but endp2 -> endp2 (itself) or not existing");
        i_parser.PrintString("moduleid", "MOD_EDI_EI_IO_RUN_TRAINING");
        i_parser.PrintString("reasoncode", "RC_CONFLICT_PBUS_CONNECTION");
        i_parser.PrintString("userdata1", "Bus endpoint target pointer1");
        i_parser.PrintString("userdata2", "Bus endpoint target pointer2");
        break;

    case 0x173811:
        i_parser.PrintString("devdesc", "Failed to boot a slave SBE");
        i_parser.PrintString("moduleid", "MOD_CHECK_SLAVE_SBE_SEEPROM_COMPLETE");
        i_parser.PrintString("reasoncode", "RC_FAILED_TO_BOOT_SBE");
        i_parser.PrintString("userdata1", "HUID of proc that failed to boot its SBE");
        i_parser.PrintString("userdata2", "Unused");
        break;

    case 0x172916:
        i_parser.PrintString("devdesc", "call_proc_exit_cache_contained: did not find minimum hardware to continue");
        i_parser.PrintString("moduleid", "ISTEP::MOD_PROC_EXIT_CACHE_CONTAINED");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MIN_HW_CHECK_FAILED");
        break;

    case 0x17000B:
        i_parser.PrintString("devdesc", "Request given to load payload into mirrored memory, but no mirrored memory exists at that location.");
        i_parser.PrintString("moduleid", "ISTEP::MOD_EXIT_CACHE_CONTAINED");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_MIRRORED_MEMORY");
        i_parser.PrintString("userdata1", "Mirrored Memory Address");
        i_parser.PrintString("userdata2", "0");
        break;

    case 0x171E0B:
        i_parser.PrintString("devdesc", "There is no functional memory");
        i_parser.PrintString("moduleid", "ISTEP::MOD_EXIT_CACHE_CONTAINED");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_FUNCTIONAL_MEMORY");
        i_parser.PrintString("userdata1", "Bottom of memory");
        i_parser.PrintString("userdata2", "Top of memory");
        break;

    case 0x17010B:
        i_parser.PrintString("devdesc", "Failure extending memory to after exiting cache contained mode.");
        i_parser.PrintString("moduleid", "ISTEP::MOD_EXIT_CACHE_CONTAINED");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MM_EXTEND_FAILED");
        i_parser.PrintString("userdata1", "rc from mm_extend");
        i_parser.PrintString("userdata2", "<UNUSED>");
        break;

    case 0x173A1F:
        i_parser.PrintString("devdesc", "PAYLOAD allocated more HDAT space than temporary space that Hostboot uses");
        i_parser.PrintString("moduleid", "MOD_VERIFY_AND_MOVE_PAYLOAD");
        i_parser.PrintString("reasoncode", "RC_HDAT_SIZE_CHECK_FAILED");
        i_parser.PrintString("userdata1", "Allocated HDAT size from PAYLOAD");
        i_parser.PrintString("userdata2", "Temporary HDAT size");
        break;

    case 0x170A1F:
        i_parser.PrintString("devdesc", "mm_block_map failed and returned nullptr");
        i_parser.PrintString("moduleid", "MOD_VERIFY_AND_MOVE_PAYLOAD");
        i_parser.PrintString("reasoncode", "RC_MM_MAP_ERR");
        i_parser.PrintString("userdata1", "Map Fail Location");
        i_parser.PrintString("userdata2", "<UNUSED>");
        break;

    case 0x17071F:
        i_parser.PrintString("devdesc", "mm_block_unmap failed and returned nullptr");
        i_parser.PrintString("moduleid", "MOD_VERIFY_AND_MOVE_PAYLOAD");
        i_parser.PrintString("reasoncode", "RC_MM_UNMAP_ERR");
        i_parser.PrintString("userdata1", "Map Fail Location");
        i_parser.PrintString("userdata2", "Return code from mm_block_unmap");
        break;

    case 0x170402:
        i_parser.PrintString("devdesc", "System target was NULL!");
        i_parser.PrintString("moduleid", "MOD_START_PAYLOAD_CALL_SHUTDOWN");
        i_parser.PrintString("reasoncode", "RC_TARGET_NULL");
        i_parser.PrintString("userdata1", "<UNUSED>");
        i_parser.PrintString("userdata2", "<UNUSED>");
        break;

    case 0x173702:
        i_parser.PrintString("devdesc", "Write of HID SPR failed");
        i_parser.PrintString("moduleid", "MOD_START_PAYLOAD_CALL_SHUTDOWN");
        i_parser.PrintString("reasoncode", "RC_FAILED_WRITE_SPR");
        i_parser.PrintString("userdata1", "current value of HID");
        i_parser.PrintString("userdata2", "write value attempted to HID");
        break;

    case 0x170A08:
        i_parser.PrintString("devdesc", "mm_block_map() returns error");
        i_parser.PrintString("moduleid", "MOD_ENABLE_CORE_CHECKSTOPS");
        i_parser.PrintString("reasoncode", "RC_MM_MAP_ERR");
        i_parser.PrintString("userdata1", "Size of STOP IMG");
        i_parser.PrintString("userdata2", "Physical address");
        break;

    case 0x170508:
        i_parser.PrintString("devdesc", "p8_pore_gen_scom_fixed returned an error when attempting to erase a reg value in the PORE image.");
        i_parser.PrintString("moduleid", "MOD_ENABLE_CORE_CHECKSTOPS");
        i_parser.PrintString("reasoncode", "RC_BAD_RC");
        i_parser.PrintString("userdata1[00:31]", "rc from p8_pore_gen_scom_fixed function");
        i_parser.PrintString("userdata1[32:63]", "address being added to image");
        i_parser.PrintString("userdata2[00:31]", "Failing Proc HUID");
        i_parser.PrintString("userdata2[32:63]", "Failing Core Id");
        break;

    case 0x170708:
        i_parser.PrintString("devdesc", "mm_block_unmap() returns error");
        i_parser.PrintString("moduleid", "ISTEP::MOD_ENABLE_CORE_CHECKSTOPS");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MM_UNMAP_ERR");
        i_parser.PrintString("userdata1", "Return Code");
        i_parser.PrintString("userdata2", "Unmap address");
        break;

    case 0x170504:
        i_parser.PrintString("devdesc", "Unable to force core checkstops by updating ACTION1 when it comes out of winkle");
        i_parser.PrintString("moduleid", "ISTEP::MOD_BUILD_HCODE_IMAGES");
        i_parser.PrintString("reasoncode", "ISTEP::RC_BAD_RC");
        i_parser.PrintString("userdata1", "Hi 32 bits: return code from p8_pore_gen_scom_fixed Lo 32 bits: Address of EX_CORE_FIR_ACTION1_0x10013107");
        i_parser.PrintString("userdata2", "Hi 32 bits: ID of core Lo 32 bits: Thread id");
        break;

    case 0x170704:
        i_parser.PrintString("devdesc", "mm_block_unmap() returns error");
        i_parser.PrintString("moduleid", "ISTEP::MOD_BUILD_HCODE_IMAGES");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MM_UNMAP_ERR");
        i_parser.PrintString("userdata1", "Return Code");
        i_parser.PrintString("userdata2", "Unmap address");
        break;

    case 0x17351D:
        i_parser.PrintString("devdesc", "P9N (Nimbus) DD1.x is not supported in this firmware driver.  Please update your module or use a different driver");
        i_parser.PrintString("moduleid", "ISTEP::MOD_SET_IPL_PARMS");
        i_parser.PrintString("reasoncode", "ISTEP::RC_P9N_DD1_NOT_SUPPORTED");
        i_parser.PrintString("userdata1", "PVR of master proc");
        break;

    case 0x17361E:
        i_parser.PrintString("devdesc", "System rebooted without xstop in MFG TERM mode.");
        i_parser.PrintString("moduleid", "ISTEP::MOD_OCC_XSTOP_HANDLER");
        i_parser.PrintString("reasoncode", "ISTEP::RC_PREVENT_REBOOT_IN_MFG_TERM_MODE");
        break;

    case 0x17140F:
        i_parser.PrintString("devdesc", "getCacheDeconfig> Master core is not mapped to a LRPx Module VPD Record.");
        i_parser.PrintString("moduleid", "ISTEP::MOD_GET_CACHE_DECONFIG");
        i_parser.PrintString("reasoncode", "ISTEP::RC_INVALID_RECORD");
        i_parser.PrintString("userdata1", "Master Core Number");
        i_parser.PrintString("userdata2", "Master processor chip huid");
        break;

    case 0x17150F:
        i_parser.PrintString("devdesc", "getCacheDeconfig> LRPx Record, CH keyword is incorrect size");
        i_parser.PrintString("moduleid", "ISTEP::MOD_GET_CACHE_DECONFIG");
        i_parser.PrintString("reasoncode", "ISTEP::RC_INCORRECT_KEWORD_SIZE");
        i_parser.PrintString("userdata1", "Master Core Number");
        i_parser.PrintString("userdata2", "CH Keyword Size");
        break;

    case 0x171610:
        i_parser.PrintString("devdesc", "activate_threads> Could not find a target for the master core");
        i_parser.PrintString("moduleid", "ISTEP::MOD_THREAD_ACTIVATE");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_MASTER_CORE_TARGET");
        i_parser.PrintString("userdata1", "Master cpu id");
        i_parser.PrintString("userdata2", "Master processor chip huid");
        break;

    case 0x171F10:
        i_parser.PrintString("devdesc", "activate_threads> Could not find a target for the master-fused core");
        i_parser.PrintString("moduleid", "ISTEP::MOD_THREAD_ACTIVATE");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_FUSED_CORE_TARGET");
        i_parser.PrintString("userdata1", "Master-fused core id");
        i_parser.PrintString("userdata2", "Master-fused processor chip huid");
        break;

    case 0x171A13:
        i_parser.PrintString("devdesc", "No present EQs found on processor");
        i_parser.PrintString("moduleid", "ISTEP::MOD_VOLTAGE_CONFIG");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_PRESENT_EQS");
        i_parser.PrintString("userdata1", "Parent PROC huid");
        break;

    case 0x171B13:
        i_parser.PrintString("devdesc", "Nominal Frequency mismatch");
        i_parser.PrintString("moduleid", "ISTEP::MOD_VOLTAGE_CONFIG");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NOMINAL_FREQ_MISMATCH");
        i_parser.PrintString("userdata1", "Previous EQ nominal frequency");
        i_parser.PrintString("userdata2", "Current EQ nominal frequency");
        break;

    case 0x172013:
        i_parser.PrintString("devdesc", "Power Mode mismatch");
        i_parser.PrintString("moduleid", "ISTEP::MOD_VOLTAGE_CONFIG");
        i_parser.PrintString("reasoncode", "ISTEP::RC_POWER_MODE_MISMATCH");
        i_parser.PrintString("userdata1[00:31]", "Previous EQ nominal power mode");
        i_parser.PrintString("userdata1[32:63]", "Current EQ nominal power mode");
        i_parser.PrintString("userdata2[00:31]", "Previous EQ turbo power mode");
        i_parser.PrintString("userdata2[32:63]", "Current EQ turbo power mode");
        break;

    case 0x170301:
        i_parser.PrintString("devdesc", "IStep failed, see other log(s) with the same PLID for reason.");
        i_parser.PrintString("moduleid", "MOD_REPORTING_ERROR");
        i_parser.PrintString("reasoncode", "RC_FAILURE");
        i_parser.PrintString("userdata1[0:31]", "eid of first error");
        i_parser.PrintString("userdata1[32:63]", "Reason code of first error");
        i_parser.PrintString("userdata2[0:31]", "Total number of elogs included");
        i_parser.PrintString("userdata2[32:64]", "iStep and SubStep that failed");
        break;

    case 0x17040E:
        i_parser.PrintString("devdesc", "System target was NULL!");
        i_parser.PrintString("moduleid", "MOD_LOAD_PAYLOAD");
        i_parser.PrintString("reasoncode", "RC_TARGET_NULL");
        i_parser.PrintString("userdata1", "<UNUSED>");
        i_parser.PrintString("userdata2", "<UNUSED>");
        break;

    case 0x173920:
        i_parser.PrintString("devdesc", "Targets detected via I2C were rediscovered after an I2C reset.  Reboot to add to config");
        i_parser.PrintString("moduleid", "ISTEP::MOD_REDISCOVER_I2C_TARGETS");
        i_parser.PrintString("reasoncode", "ISTEP::RC_REDISCOVERED_TARGETS");
        i_parser.PrintString("userdata1[0:31]", "HUID of 1st rediscovered target");
        i_parser.PrintString("userdata1[31:63]", "HUID of 2nd rediscovered target, if applicable");
        i_parser.PrintString("userdata2[0:31]", "Target Count Before Rediscover Attempt");
        i_parser.PrintString("userdata2[31:63]", "Target Count After Rediscover Attempt");
        break;

    case 0x170D0A:
        i_parser.PrintString("devdesc", "Illegal ATTR_PROC_PCIE_NUM_PEC attribute read from a processor chip target.");
        i_parser.PrintString("moduleid", "MOD_COMPUTE_PCIE_CONFIG_ATTRS");
        i_parser.PrintString("reasoncode", "RC_INVALID_ATTR_VALUE");
        i_parser.PrintString("userdata1[0:15]", "Target's HUID");
        i_parser.PrintString("userdata1[16:31]", "PEC id number");
        i_parser.PrintString("userdata2[32:63]", "ATTR_PROC_PCIE_NUM_PEC attribute value");
        break;

    case 0x170E0A:
        i_parser.PrintString("devdesc", "No valid PCIE IOP configuration found.  All PHBs on this PEC will be disabled.");
        i_parser.PrintString("moduleid", "MOD_COMPUTE_PCIE_CONFIG_ATTRS");
        i_parser.PrintString("reasoncode", "RC_INVALID_CONFIGURATION");
        i_parser.PrintString("userdata1[0:31]", "Target processor chip's HUID");
        i_parser.PrintString("userdata1[32:63]", "Target PEC HUID");
        i_parser.PrintString("userdata2[0:15]", "PEC lane set 0 lane mask");
        i_parser.PrintString("userdata2[16:31]", "PEC lane set 1 lane mask");
        i_parser.PrintString("userdata2[32:47]", "PEC lane set 2 lane mask");
        i_parser.PrintString("userdata2[48:63]", "PEC lane set 3 lane mask");
        break;

    case 0x171D15:
        i_parser.PrintString("devdesc", "Failed to set SEEPROM lock and/or TPM deconfig protection for this processor, so we cannot guarrantee platform secuirty for this processor");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_UPDATE_SECURITY_CTRL_HWP_FAIL");
        i_parser.PrintString("userdata1", "Processor Target");
        i_parser.PrintString("userdata2", "TPM Target");
        break;

    case 0x172415:
        i_parser.PrintString("devdesc", "Unable to read the master processor CBS control register");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MASTER_PROC_CBS_CONTROL_READ_FAIL");
        i_parser.PrintString("userdata1", "Master Processor Target");
        break;

    case 0x172215:
        i_parser.PrintString("devdesc", "Unable to read the master processor primary hash from the SBE");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MASTER_PROC_PRIMARY_HASH_READ_FAIL");
        i_parser.PrintString("userdata1", "Master Processor Target");
        break;

    case 0x172315:
        i_parser.PrintString("devdesc", "Unable to read the master processor backup hash from the SBE");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MASTER_PROC_BACKUP_HASH_READ_FAIL");
        i_parser.PrintString("userdata1", "Processor Target");
        break;

    case 0x172115:
        i_parser.PrintString("devdesc", "The primary SBE HW Keys' hash does not match the the backup SBE HW Keys' hash, so we cannot guarrantee platform security for the system");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_MASTER_PROC_SBE_KEYS_HASH_MISMATCH");
        i_parser.PrintString("userdata1", "Master Processor Target");
        break;

    case 0x172715:
        i_parser.PrintString("devdesc", "Unable to read the slave processor CBS control register");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_SLAVE_PROC_CBS_CONTROL_READ_FAIL");
        i_parser.PrintString("userdata1", "Slave Processor Target");
        break;

    case 0x172515:
        i_parser.PrintString("devdesc", "Unable to read the slave processor primary hash from the SBE");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_SLAVE_PROC_PRIMARY_HASH_READ_FAIL");
        i_parser.PrintString("userdata1", "Slave Processor Target");
        break;

    case 0x172615:
        i_parser.PrintString("devdesc", "Unable to read the slave processor backup hash from the SBE");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_SLAVE_PROC_BACKUP_HASH_READ_FAIL");
        i_parser.PrintString("userdata1", "Slave Processor Target");
        break;

    case 0x172815:
        i_parser.PrintString("devdesc", "Mismatch processor state was detected for this processor, so we cannot guarrantee platform security for the system");
        i_parser.PrintString("moduleid", "ISTEP::MOD_UPDATE_REDUNDANT_TPM");
        i_parser.PrintString("reasoncode", "ISTEP::RC_PROC_SECURITY_STATE_MISMATCH");
        i_parser.PrintString("userdata1", "Processor Target");
        i_parser.PrintString("userdata2[60:60]", "SAB bit mismatch");
        i_parser.PrintString("userdata2[61:61]", "Jumper (SMD) bit mismatch");
        i_parser.PrintString("userdata2[62:62]", "Primary SBE hash mismatch");
        i_parser.PrintString("userdata2[63:63]", "Backup SBE hash mismatch");
        break;

    case 0x170503:
        i_parser.PrintString("devdesc", "Kernel returned error when trying to activate core.");
        i_parser.PrintString("moduleid", "MOD_HOST_ACTIVATE_SLAVE_CORES");
        i_parser.PrintString("reasoncode", "RC_BAD_RC");
        i_parser.PrintString("userdata1", "PIR of failing core.");
        i_parser.PrintString("userdata2", "rc of cpu_start_core().");
        break;

    case 0x171F06:
        i_parser.PrintString("devdesc", "activate_master> Could not find a target for the master-fused core");
        i_parser.PrintString("moduleid", "ISTEP::MOD_HOST_ACTIVATE_MASTER");
        i_parser.PrintString("reasoncode", "ISTEP::RC_NO_FUSED_CORE_TARGET");
        i_parser.PrintString("userdata1", "Master-fused core id");
        i_parser.PrintString("userdata2", "Master-fused processor chip huid");
        break;

    case 0x170606:
        i_parser.PrintString("devdesc", "cpu_master_winkle returned an error");
        i_parser.PrintString("moduleid", "MOD_HOST_ACTIVATE_MASTER");
        i_parser.PrintString("reasoncode", "RC_FAIL_MASTER_WINKLE");
        i_parser.PrintString("userdata1", "return code from cpu_master_winkle");
        i_parser.PrintString("userdata2", "Fused core indicator");
        break;

    case 0x17321A:
        i_parser.PrintString("devdesc", "SBE cannot be reset during MPIPL");
        i_parser.PrintString("moduleid", "MOD_SBE_PERFORM_UPDATE_CHECK");
        i_parser.PrintString("reasoncode", "RC_SBE_UPDATE_IN_MPIPL");
        i_parser.PrintString("userdata1[0:31]", "original mc sync mode");
        i_parser.PrintString("userdata1[32:63]", "new mc sync mode");
        i_parser.PrintString("userdata2[0:31]", "original nest frequency");
        i_parser.PrintString("userdata2[32:63]", "new nest frequency");
        break;

    default:
        l_success = false;
        break;
    };
    return l_success;
}

static errl::SrcPlugin g_SrcPlugin(0x1700, SrcDataParse, ERRL_CID_HOSTBOOT);
